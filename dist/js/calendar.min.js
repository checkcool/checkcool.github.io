window.HuangLi=window.HuangLi||{},function(){var t={platform:"",version:0,Android:function(){return"Android"===this.platform},iOS:function(){return"iOS"===this.platform},init:function(){var t=navigator.userAgent;t.match(/Android/i)?(this.platform="Android",this.version=parseFloat(t.slice(t.indexOf("Android")+8))):t.match(/iPhone|iPad|iPod/i)&&(this.platform="iOS",this.version=parseFloat(t.slice(t.indexOf("OS")+3)))}};t.init(),this.mobile=t}(),function(){var t=function(t,e){var a=document.getElementsByTagName("head")[0],n=document.createElement("script");n.setAttribute("type","text/javascript"),n.setAttribute("src",t),a.appendChild(n);var r=function(){"function"==typeof e&&e()};document.all?n.onreadystatechange=function(){"loaded"!=n.readyState&&"complete"!=n.readyState||r()}:n.onload=function(){r()}};Zepto&&($.getScript=t)}(),function(){var t=function(){},e={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g};t.compile=function(t,a){var n=a||e,r="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+t.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(n.interpolate,function(t,e){return"',"+e.replace(/\\'/g,"'")+",'"}).replace(n.evaluate||null,function(t,e){return"');"+e.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');";return new Function("obj",r)},t.template=function(e,a){var n=t.compile(e);return n(a)},"undefined"!=typeof exports?exports.Footprint=t:window.Footprint=t,Zepto&&($.template=t.template)}();var Calendar=function(){function t(){if(!F)return"";var t=F.year,e=F.month,a=F.day;return e=10>e?"0"+e:e,a=10>a?"0"+a:a,t+"-"+e+"-"+a}function e(t,e,a,n){F={year:t||D.getFullYear(),month:e||D.getMonth()+1,day:a||D.getDate(),pos:n||0}}function a(){if(HuangLi["y"+F.year]){var t=HuangLi["y"+F.year][j(F.month,F.day)];n(t)}else F.year>=y&&F.year<=_&&$.getScript(f+"hl"+F.year+".min.js",function(){var t=HuangLi["y"+F.year][j(F.month,F.day)];n(t)})}function n(t){t?($(".hl_y_content").html(t.y),$(".hl_j_content").html(t.j),$(".date_hl").show()):$(".date_hl").hide()}function r(e){var n=LunarCalendar.solarToLunar(F.year,F.month,F.day),r=new Date(F.year,F.month-1,F.day).getDay(),i=["日","一","二","三","四","五","六"];$("#toolbar h1").html(t()),$(".date_lunar_info").html("农历"+n.lunarMonthName+n.lunarDayName+" 星期"+i[r]),$(".date_gan_zhi").html(n.GanZhiYear+"年["+n.zodiac+"年] "+n.GanZhiMonth+"月 "+n.GanZhiDay+"日");var o=[];n.term&&o.push(n.term),n.lunarFestival&&o.push(n.lunarFestival),n.solarFestival&&o.push(n.solarFestival.split(" ")),$(".date_fetv").html(o.length>0?"节假日纪念日："+o.join("，"):""),e&&e.attr("class","date_item date_current"),a()}function i(){var t=$("#date_list_"+C[0]).find(".date_item").eq(F.pos);D.getFullYear()==F.year&&D.getMonth()+1==F.month&&D.getDate()==F.day?t.attr("class","date_item date_today"):t.attr("class","date_item")}function o(){x=LunarCalendar.calendar(F.year,F.month,!0);for(var t="",e=w.join(""),a=0;a<x.monthData.length;a++){var n=x.monthData[a];a%7==0&&(t+='<div class="date_row">');var i={index:a,itemCls:"",iconCls:n.worktime?1==n.worktime?" worktime":" holiday":"",iconText:n.worktime?1==n.worktime?"班":"休":"",fetvCls:n.lunarFestival||n.term?" lunar_fetv":n.solarFestival?" solar_fetv":"",lunar:""},o="";D.getFullYear()==n.year&&D.getMonth()+1==n.month&&D.getDate()==n.day&&(o=" date_today"),F.year==n.year&&F.month==n.month&&F.day==n.day&&(o=" date_current",F.pos=a),(a<x.firstDay||a>=x.firstDay+x.monthDays)&&(o=" date_other"),i.itemCls=o;var l=n.lunarDayName;n.solarFestival&&(l=n.solarFestival),n.lunarFestival&&(l=n.lunarFestival),n.term&&(l=n.term),i.lunar=l,$.extend(n,i),t+=$.template(e,n),a%7==6&&(t+="</div>")}$("#date_list_"+C[0]).html(t),r()}function l(t,a,n,r){var i,l,d;a&&n?(i=a,l=n):F.month+t<1?(i=F.year-1,l=12):F.month+t>12?(i=F.year+1,l=1):(i=F.year,l=F.month+t),d=r?r:F.day>LunarCalendar.getSolarMonthDays[l-1]?LunarCalendar.getSolarMonthDays[l-1]:F.day,v>i||i>g||(e(i,l,d),s(),o(),u(t))}function s(){var t=C.shift();C.push(t)}function u(t){b&&clearTimeout(b),d({time:0,pos:0}),$("#date_list_"+C[0]).css({left:t*S}),$("#date_list_"+C[1]).css({left:0}),b=t>0?setTimeout(function(){d({time:300,pos:-1*S})},50):setTimeout(function(){d({time:300,pos:S})},50)}function d(t){var e=$(".date_slide")[0];e.style.webkitTransitionDuration=t.time+"ms",m(e,t.pos)}function m(t,e){"iOS"==mobile.platform?t.style.webkitTransform="translate3d("+e+"px,0px,0px)":t.style.webkitTransform="translate("+e+"px,0px)"}function c(){$(".date_list").hammer().on("tap",".date_item",function(){var t=$(this).attr("data-index");t=parseInt(t,10);var a=x.monthData[t];t<x.firstDay?l(-1,a.year,a.month,a.day):t>=x.firstDay+x.monthDays?l(1,a.year,a.month,a.day):(i(),e(a.year,a.month,a.day,t),r($(this)))}),$(".today").hammer().on("tap",function(t){return l(1,D.getFullYear(),D.getMonth()+1,D.getDate()),!1}),$(".slide_wrap").hammer().on("swipeleft",function(t){return l(1),t.preventDefault(),t.gesture.preventDefault(),!1}),$(".slide_wrap").hammer().on("swiperight",function(t){return l(-1),t.preventDefault(),t.gesture.preventDefault(),!1})}function p(){S=$(document).width(),$(".date_list").eq(0).css("width",S),$(".date_list").eq(1).css({width:S,left:S}),"iOS"==mobile.platform&&(m(document.getElementById("date_list_0"),0),m(document.getElementById("date_list_1"),0))}function h(){p(),c(),e(),o()}var f="http://o7qcr3ot0.bkt.clouddn.com/dist/js/",y=2008,_=2020,v=1891,g=2100,w=['<div class="date_item<%=itemCls%>" data-index="<%=index%>">','	<span class="date_icon<%=iconCls%>"><%=iconText%></span>','	<span class="date_day"><%=day%></span>','	<span class="date_lunar<%=fetvCls%>"><%=lunar%></span>',"</div>"],D=new Date,F=null,x=null,C=[0,1],S=0,b=-1,j=function(t,e){return t+=1,t=10>t?"0"+t:t,e=10>e?"0"+e:e,"d"+t+e};return{init:h}}();$(function(){Calendar.init()});