define(["util","canvasclock","polyfill"],function(t,n,e){function o(){c.onclick=function(){t.addFavorite(window.location.href,"查酷导航")},s.onclick=function(){t.setHome(this,window.location.href)},window.onscroll=function(){var n=document.getElementsByTagName("header")[0],e=document.getElementById("rtt"),o=document.body.scrollTop;o>0?(t.addClass(n,"shadowed"),t.removeClass(e,"hide")):(t.removeClass(n,"shadowed"),t.addClass(e,"hide"))}}function i(){function t(t,n,a){var y='<strong class="city_cn">'+s[n]+'</strong> : <span class="date_cn">'+a.getFullYear().toString()+"年"+(a.getMonth()+1).toString()+"月"+a.getDate().toString()+"日 "+o[a.getDay()]+" "+c(a)+'</span><br /><strong class="city_en">'+n.toUpperCase()+'</strong> : <span class="date_en">'+a.getFullYear().toString()+"/"+(a.getMonth()+1).toString()+"/"+a.getDate().toString()+" "+(a.getHours()>=12?i[1]:i[0])+" "+e[a.getDay()]+"</span>";t.innerHTML=y}var e=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],o=["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],i=["AM","PM"],a=["零晨","早上","中午","下午","晚上"],c=function(t){var n=t.getHours();return n>=0&&5>n?a[0]:n>=5&&11>n?a[1]:n>=11&&13>n?a[2]:n>=13&&18>n?a[3]:n>=18&&23>=n?a[4]:void 0},s={beijing:"中国 北京",newyork:"美国 纽约",vancouver:"加拿大 温哥华",tokyo:"日本 东京",moscow:"俄罗斯 莫斯科",sydney:"澳大利亚 悉尼",paris:"法国 巴黎",london:"英国 伦敦",sanfrancisco:"美国 旧金山",dubai:"阿联酋 迪拜",berlin:"德国 柏林",toronto:"加拿大 多伦多",seoul:"韩国 首尔",brazil:"巴西 巴西",bangkok:"泰国 曼谷",newdelhi:"印度 新德里",cairo:"埃及 开罗"},y=new n({city:"beijing",canvas:document.getElementById("beijing_clock")});t(y.options.canvas.parentNode.nextElementSibling,y.options.city,n.getDateByCity(y.options.city));var l=new n({city:"newyork",canvas:document.getElementById("newyork_clock")});t(l.options.canvas.parentNode.nextElementSibling,l.options.city,n.getDateByCity(l.options.city));var d=new n({city:"vancouver",canvas:document.getElementById("vancouver_clock")});t(d.options.canvas.parentNode.nextElementSibling,d.options.city,n.getDateByCity(d.options.city));var r=new n({city:"tokyo",canvas:document.getElementById("tokyo_clock")});t(r.options.canvas.parentNode.nextElementSibling,r.options.city,n.getDateByCity(r.options.city));var g=new n({city:"moscow",canvas:document.getElementById("moscow_clock")});t(g.options.canvas.parentNode.nextElementSibling,g.options.city,n.getDateByCity(g.options.city));var p=new n({city:"london",canvas:document.getElementById("london_clock")});t(p.options.canvas.parentNode.nextElementSibling,p.options.city,n.getDateByCity(p.options.city));var m=new n({city:"paris",canvas:document.getElementById("paris_clock")});t(m.options.canvas.parentNode.nextElementSibling,m.options.city,n.getDateByCity(m.options.city));var v=new n({city:"sydney",canvas:document.getElementById("sydney_clock")});t(v.options.canvas.parentNode.nextElementSibling,v.options.city,n.getDateByCity(v.options.city));var u=new n({city:"sanfrancisco",canvas:document.getElementById("sanfrancisco_clock")});t(u.options.canvas.parentNode.nextElementSibling,u.options.city,n.getDateByCity(u.options.city));var B=new n({city:"dubai",canvas:document.getElementById("dubai_clock")});t(B.options.canvas.parentNode.nextElementSibling,B.options.city,n.getDateByCity(B.options.city));var E=new n({city:"berlin",canvas:document.getElementById("berlin_clock")});t(E.options.canvas.parentNode.nextElementSibling,E.options.city,n.getDateByCity(E.options.city));var b=new n({city:"toronto",canvas:document.getElementById("toronto_clock")});t(b.options.canvas.parentNode.nextElementSibling,b.options.city,n.getDateByCity(b.options.city));var k=new n({city:"seoul",canvas:document.getElementById("seoul_clock")});t(k.options.canvas.parentNode.nextElementSibling,k.options.city,n.getDateByCity(k.options.city));var w=new n({city:"brazil",canvas:document.getElementById("brazil_clock")});t(w.options.canvas.parentNode.nextElementSibling,w.options.city,n.getDateByCity(w.options.city));var S=new n({city:"cairo",canvas:document.getElementById("cairo_clock")});t(S.options.canvas.parentNode.nextElementSibling,S.options.city,n.getDateByCity(S.options.city));var C=new n({city:"newdelhi",canvas:document.getElementById("newdelhi_clock")});t(C.options.canvas.parentNode.nextElementSibling,C.options.city,n.getDateByCity(C.options.city));var D=new n({city:"bangkok",canvas:document.getElementById("bangkok_clock")});t(D.options.canvas.parentNode.nextElementSibling,D.options.city,n.getDateByCity(D.options.city))}var a=document.getElementById("clock"),c=document.getElementById("addfav"),s=document.getElementById("sethome");return{init:function(){t.initClock(a),o(),e.init(),i()}}});